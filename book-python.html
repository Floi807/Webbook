<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python - –ß—Ç–µ–Ω–∏–µ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f8f8f8;
      color: #333;
      line-height: 1.6;
    }

    /* –®–∞–ø–∫–∞ */
    .reader-header {
      background: #fff;
      border-bottom: 1px solid #e6e6e6;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .back-btn {
      background: none;
      border: none;
      font-size: 14px;
      color: #0066cc;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .back-btn:hover {
      background: #f0f0f0;
    }

    .book-title {
      font-size: 16px;
      font-weight: 500;
      color: #333;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .icon-btn {
      background: none;
      border: none;
      padding: 8px;
      border-radius: 4px;
      cursor: pointer;
      color: #666;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .icon-btn:hover {
      background: #f0f0f0;
      color: #333;
    }

    /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .reader-container {
      display: flex;
      height: calc(100vh - 60px);
    }

    /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ–º */
    .sidebar {
      width: 300px;
      background: #fff;
      border-right: 1px solid #e6e6e6;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .book-cover {
      text-align: center;
      margin-bottom: 20px;
    }

    .book-cover img {
      width: 120px;
      height: 160px;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .book-info h1 {
      font-size: 18px;
      margin-bottom: 5px;
      color: #333;
    }

    .book-info .author {
      color: #666;
      font-size: 14px;
      margin-bottom: 15px;
    }

    .toc-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
      color: #333;
    }

    .toc-list {
      list-style: none;
    }

    .toc-item {
      margin-bottom: 8px;
    }

    .toc-link {
      display: block;
      padding: 8px 12px;
      color: #666;
      text-decoration: none;
      border-radius: 4px;
      font-size: 14px;
      transition: all 0.2s;
    }

    .toc-link:hover {
      background: #f0f0f0;
      color: #333;
    }

    .toc-link.active {
      background: #0066cc;
      color: white;
    }

    /* –û–±–ª–∞—Å—Ç—å —á—Ç–µ–Ω–∏—è */
    .reading-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #f8f8f8;
    }

    /* –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ */
    .toolbar {
      background: #fff;
      border-bottom: 1px solid #e6e6e6;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .toolbar-left, .toolbar-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .font-controls {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #f8f8f8;
      padding: 6px 12px;
      border-radius: 6px;
    }

    .font-btn {
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
      color: #666;
      padding: 4px 8px;
      border-radius: 3px;
    }

    .font-btn:hover {
      background: #e6e6e6;
    }

    .font-size {
      font-size: 14px;
      color: #333;
      min-width: 30px;
      text-align: center;
    }

    .theme-btn {
      background: none;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      color: #666;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .theme-btn:hover {
      background: #f0f0f0;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä PDF */
    .pdf-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      overflow-y: auto;
    }

    .pdf-frame {
      width: 100%;
      max-width: 800px;
      height: 100%;
      border: none;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      background: white;
    }

    .pdf-placeholder {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }

    .pdf-placeholder h3 {
      margin-bottom: 10px;
      color: #333;
    }

    /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
    .navigation {
      background: #fff;
      border-top: 1px solid #e6e6e6;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-btn {
      background: #0066cc;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.2s;
    }

    .nav-btn:hover {
      background: #0052a3;
    }

    .nav-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .page-info {
      font-size: 14px;
      color: #666;
    }

    /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
    body.dark-theme {
      background: #1a1a1a;
      color: #e6e6e6;
    }

    body.dark-theme .reader-header,
    body.dark-theme .sidebar,
    body.dark-theme .toolbar,
    body.dark-theme .navigation {
      background: #2d2d2d;
      border-color: #404040;
    }

    body.dark-theme .book-title,
    body.dark-theme .book-info h1,
    body.dark-theme .toc-title {
      color: #e6e6e6;
    }

    body.dark-theme .book-info .author {
      color: #999;
    }

    body.dark-theme .toc-link {
      color: #999;
    }

    body.dark-theme .toc-link:hover {
      background: #404040;
      color: #e6e6e6;
    }

    body.dark-theme .font-controls {
      background: #404040;
    }

    body.dark-theme .font-btn,
    body.dark-theme .theme-btn {
      color: #999;
    }

    body.dark-theme .font-btn:hover,
    body.dark-theme .theme-btn:hover {
      background: #404040;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: -100%;
        top: 0;
        height: 100vh;
        z-index: 1000;
        transition: left 0.3s;
      }

      .sidebar.active {
        left: 0;
      }

      .reader-container {
        height: calc(100vh - 120px);
      }
    }
  </style>
</head>
<body>
  <!-- –®–∞–ø–∫–∞ —á–∏—Ç–∞–ª–∫–∏ -->
  <header class="reader-header">
    <div class="header-left">
      <button class="back-btn" onclick="goBack()">
        ‚Üê –ù–∞–∑–∞–¥
      </button>
      <div class="book-title">–õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python</div>
    </div>
    <div class="header-right">
      <button class="icon-btn" onclick="toggleSidebar()" title="–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ">
        üìë
      </button>
      <button class="icon-btn" onclick="toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
        üåô
      </button>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="reader-container">
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ–º -->
    <aside class="sidebar" id="sidebar">
      <div class="book-cover">
        <img src="img/–∫–Ω–∏–≥–∞ –õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python.jpg" alt="–û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏">
      </div>
      <div class="book-info">
        <h1>–õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python</h1>
        <div class="author">–ó–µ–¥ –®–æ—É</div>
      </div>

      <div class="toc-title">–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</div>
      <ul class="toc-list">
        <li class="toc-item"><a href="#" class="toc-link active" onclick="changeChapter(1)">–í–≤–µ–¥–µ–Ω–∏–µ</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(2)">–ì–ª–∞–≤–∞ 1: –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(3)">–ì–ª–∞–≤–∞ 2: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(4)">–ì–ª–∞–≤–∞ 3: –£—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(5)">–ì–ª–∞–≤–∞ 4: –¶–∏–∫–ª—ã</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(6)">–ì–ª–∞–≤–∞ 5: –§—É–Ω–∫—Ü–∏–∏</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(7)">–ì–ª–∞–≤–∞ 6: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏</a></li>
        <li class="toc-item"><a href="#" class="toc-link" onclick="changeChapter(8)">–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</a></li>
      </ul>
    </aside>

    <!-- –û–±–ª–∞—Å—Ç—å —á—Ç–µ–Ω–∏—è -->
    <main class="reading-area">
      <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
      <div class="toolbar">
        <div class="toolbar-left">
          <div class="font-controls">
            <button class="font-btn" onclick="changeFontSize(-1)">A-</button>
            <span class="font-size" id="fontSize">100%</span>
            <button class="font-btn" onclick="changeFontSize(1)">A+</button>
          </div>
        </div>
        <div class="toolbar-right">
          <button class="theme-btn" onclick="toggleTheme()">
            <span id="themeIcon">üåô</span> –¢–µ–º–∞
          </button>
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä PDF -->
      <div class="pdf-container">
        <iframe class="pdf-frame" id="pdfFrame" src="/Webbook/pdf/–∫–Ω–∏–≥–∞ –õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python_3.pdf">
          <div class="pdf-placeholder">
            <h3>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å PDF</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å –∫–Ω–∏–≥—É –¥–ª—è —á—Ç–µ–Ω–∏—è</p>
            <button class="nav-btn" onclick="downloadBook()">üì• –°–∫–∞—á–∞—Ç—å –∫–Ω–∏–≥—É</button>
          </div>
        </iframe>
      </div>

      <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
      <div class="navigation">
        <button class="nav-btn" onclick="prevPage()" id="prevBtn">
          ‚Üê –ù–∞–∑–∞–¥
        </button>
        
        <div class="page-info">
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ <span id="currentPage">1</span> –∏–∑ <span id="totalPages">-</span>
        </div>
        
        <button class="nav-btn" onclick="nextPage()" id="nextBtn">
          –í–ø–µ—Ä–µ–¥ ‚Üí
        </button>
      </div>
    </main>
  </div>

  <script>
    // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    let currentState = {
      fontSize: 100,
      currentPage: 1,
      totalPages: 0,
      darkTheme: false,
      sidebarOpen: window.innerWidth > 768
    };

    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const pdfFrame = document.getElementById('pdfFrame');
    const sidebar = document.getElementById('sidebar');
    const fontSizeElement = document.getElementById('fontSize');
    const currentPageElement = document.getElementById('currentPage');
    const totalPagesElement = document.getElementById('totalPages');
    const themeIcon = document.getElementById('themeIcon');

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    function initReader() {
      updateFontSize();
      updateTheme();
      updateSidebar();
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º PDF
      loadPDF();
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ PDF
    function loadPDF() {
      const pdfPath = '/Webbook/pdf/–∫–Ω–∏–≥–∞ –õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python_3.pdf';
      pdfFrame.src = pdfPath;
      
      // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PDF.js)
      setTimeout(() => {
        currentState.totalPages = 150; // –ó–∞–≥–ª—É—à–∫–∞
        updatePageInfo();
      }, 1000);
    }

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
    function nextPage() {
      if (currentState.currentPage < currentState.totalPages) {
        currentState.currentPage++;
        updatePageInfo();
        scrollToTop();
      }
    }

    function prevPage() {
      if (currentState.currentPage > 1) {
        currentState.currentPage--;
        updatePageInfo();
        scrollToTop();
      }
    }

    function updatePageInfo() {
      currentPageElement.textContent = currentState.currentPage;
      totalPagesElement.textContent = currentState.totalPages;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
      document.getElementById('prevBtn').disabled = currentState.currentPage === 1;
      document.getElementById('nextBtn').disabled = currentState.currentPage === currentState.totalPages;
    }

    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ iframe)
    function changeFontSize(delta) {
      currentState.fontSize = Math.max(50, Math.min(150, currentState.fontSize + delta * 10));
      updateFontSize();
    }

    function updateFontSize() {
      fontSizeElement.textContent = currentState.fontSize + '%';
      pdfFrame.style.transform = `scale(${currentState.fontSize / 100})`;
      pdfFrame.style.transformOrigin = 'center top';
    }

    // –°–º–µ–Ω–∞ —Ç–µ–º—ã
    function toggleTheme() {
      currentState.darkTheme = !currentState.darkTheme;
      updateTheme();
    }

    function updateTheme() {
      if (currentState.darkTheme) {
        document.body.classList.add('dark-theme');
        themeIcon.textContent = '‚òÄÔ∏è';
      } else {
        document.body.classList.remove('dark-theme');
        themeIcon.textContent = 'üåô';
      }
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª—å—é
    function toggleSidebar() {
      currentState.sidebarOpen = !currentState.sidebarOpen;
      updateSidebar();
    }

    function updateSidebar() {
      if (window.innerWidth <= 768) {
        sidebar.classList.toggle('active', currentState.sidebarOpen);
      } else {
        sidebar.style.display = currentState.sidebarOpen ? 'flex' : 'none';
      }
    }

    // –°–º–µ–Ω–∞ –≥–ª–∞–≤—ã
    function changeChapter(chapterNumber) {
      // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Å—ã–ª–∫—É –≤ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–∏
      document.querySelectorAll('.toc-link').forEach(link => link.classList.remove('active'));
      event.target.classList.add('active');
      
      // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã –º–µ–Ω—è–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ PDF
      currentState.currentPage = (chapterNumber - 1) * 20 + 1;
      updatePageInfo();
      scrollToTop();
      
      // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å–∞–π–¥–±–∞—Ä –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≥–ª–∞–≤—ã
      if (window.innerWidth <= 768) {
        currentState.sidebarOpen = false;
        updateSidebar();
      }
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    function scrollToTop() {
      document.querySelector('.pdf-container').scrollTop = 0;
    }

    function goBack() {
      window.history.back();
    }

    function downloadBook() {
      const link = document.createElement('a');
      link.href = '/Webbook/pdf/–∫–Ω–∏–≥–∞ –õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python_3.pdf';
      link.download = '–õ–µ–≥–∫–∏–π —Å–ø–æ—Å–æ–± –≤—ã—É—á–∏—Ç—å Python.pdf';
      link.click();
    }

    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
    window.addEventListener('resize', updateSidebar);

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', initReader);
  </script>
</body>
</html>